[
  {
    "id": "react-fundamentals-l1",
    "track": "React",
    "chapter": "React Fundamentals",
    "title": "React & JSX Warmup",
    "estimated_minutes": 8,
    "xp_reward": 15,
    "prerequisites": [],
    "blocks": [
      {
        "type": "ai-mentor",
        "mode": "explain",
        "title": "AI Mentor: React Primer",
        "persona": "guide",
        "lessonContext": "High-level introduction to the React mental model and JSX.",
        "topic": "React fundamentals and JSX mental model",
        "prompt": "Explain the topic conversationally, highlight why React uses components + JSX, and encourage the learner to reflect back what they understood.",
        "suggestedQuestions": [
          "Why do we need React components instead of plain HTML?",
          "How does JSX relate to the Virtual DOM?",
          "What kind of apps benefit most from React?"
        ]
      },
      {
        "type": "ai-mentor",
        "mode": "quiz",
        "title": "AI Mentor: Quick Quiz",
        "persona": "examiner",
        "lessonContext": "Check the learner's understanding of React fundamentals after the primer.",
        "topic": "React fundamentals and JSX mental model",
        "prompt": "Quiz the learner with short open-ended questions about why React exists, how JSX works, and when to split components.",
        "quizGoal": 2
      }
    ]
  },
  {
    "id": "react-fundamentals-l2",
    "track": "React",
    "chapter": "React Fundamentals",
    "title": "Props Basics",
    "estimated_minutes": 12,
    "xp_reward": 22,
    "prerequisites": ["react-fundamentals-l1"],
    "blocks": [
      {
        "type": "text",
        "title": "Props = Inputs",
        "markdown": "Props (short for properties) are read-only inputs to a component. They allow you to pass data from a parent component to a child. A common pattern is to use object destructuring for props in the function signature."
      },
      {
        "type": "quiz",
        "question": "How do you idiomatically read a prop named `label` in a function component?",
        "kind": "single",
        "options": [
          "function Button(props) { const { label } = props }",
          "function Button() { const { label } = this.props }",
          "function Button([label]) {}",
          "function Button({ label }) {}"
        ],
        "correct": [3],
        "explanations": [
          "This works, but destructuring in the signature is more common.",
          "This is syntax for class components, not function components.",
          "This is array destructuring, not object destructuring.",
          "Correct! This is the most common and concise way to access props."
        ],
        "penalty_hearts": 1
      },
      {
        "type": "code",
        "title": "Greeting with Props",
        "instructions": "Build a component `Greeting({ name })` that returns `<p>Hello, {name}!</p>`. Export it as the default.",
        "language": "javascript",
        "starter": "export default function Greeting({ name }){\n  // Your code here\n}",
        "solution": "export default function Greeting({ name }){\n  return <p>Hello, {name}!</p>;\n}",
        "tests": [
          { "name": "uses name prop", "hidden": false, "run": "check if 'Ada' is present when name='Ada'" }
        ],
        "penalty_hearts": 1
      },
      {
        "type": "mentor",
        "mode": "guide",
        "trigger": "manual",
        "prompt_vars": {
          "proficiency": "beginner",
          "lesson_context": "Using and destructuring props in React."
        }
      }
    ]
  },
  {
    "id": "react-fundamentals-l3",
    "track": "React",
    "chapter": "React Fundamentals",
    "title": "State with useState",
    "estimated_minutes": 12,
    "xp_reward": 22,
    "prerequisites": ["react-fundamentals-l2"],
    "blocks": [
      {
        "type": "text",
        "title": "What is State?",
        "markdown": "State allows a component to remember information and re-render when that information changes. The `useState` Hook is the primary way to add state to function components."
      },
      {
        "type": "quiz",
        "question": "What does `useState` return?",
        "kind": "single",
        "options": [
          "Only the current state value.",
          "A state value and a function to update it.",
          "A reducer and a dispatch function.",
          "Nothing. It only causes a re-render."
        ],
        "correct": [1],
        "explanations": [
          "Incorrect. You also get an updater function.",
          "Correct! `useState` returns a pair: [value, setValue].",
          "Incorrect. That's `useReducer`.",
          "Incorrect. It returns actual values you can use."
        ],
        "penalty_hearts": 1
      },
      {
        "type": "code",
        "title": "Simple Counter",
        "instructions": "Implement a counter component using `useState`. It should render a button showing the count and increment on click.",
        "language": "javascript",
        "starter": "import { useState } from 'react';\n\nexport default function Counter(){\n  // Your code here\n}",
        "solution": "import { useState } from 'react';\n\nexport default function Counter(){\n  const [count, setCount] = useState(0);\n  return <button onClick={() => setCount(c => c + 1)}>{count}</button>;\n}",
        "tests": [
          { "name": "renders initial count", "hidden": false, "run": "check if initial render shows 0" },
          { "name": "increments on click", "hidden": false, "run": "check if count becomes 1 after a click" }
        ],
        "penalty_hearts": 1
      },
      {
        "type": "mentor",
        "mode": "examiner",
        "trigger": "after_test_fail",
        "prompt_vars": {
          "proficiency": "beginner",
          "lesson_context": "Ensure useState is used correctly and the setter function updates the state."
        }
      }
    ]
  },
  {
    "id": "react-fundamentals-l4",
    "track": "React",
    "chapter": "React Fundamentals",
    "title": "Lists & Keys",
    "estimated_minutes": 8,
    "xp_reward": 18,
    "prerequisites": ["react-fundamentals-l3"],
    "blocks": [
      {
        "type": "text",
        "title": "Why Keys?",
        "markdown": "When you render a list of items, you must provide a unique `key` prop for each item. Keys help React identify which items have changed, are added, or are removed."
      },
      {
        "type": "quiz",
        "question": "For a list of todo items fetched from a database, what is the best value to use as a key?",
        "kind": "single",
        "options": [
          "The array index of the item",
          "Math.random()",
          "The unique `todo.id` from the database",
          "The `todo.text` content"
        ],
        "correct": [2],
        "explanations": [
          "Incorrect. The index is not stable if the list is reordered.",
          "Incorrect. This generates a new key on every render.",
          "Correct! A stable, unique ID is the perfect key.",
          "Incorrect. The text may not be unique or could change."
        ],
        "penalty_hearts": 1
      }
    ]
  },
  {
    "id": "react-fundamentals-l5",
    "track": "React",
    "chapter": "React Fundamentals",
    "title": "Controlled Inputs & useEffect",
    "estimated_minutes": 15,
    "xp_reward": 25,
    "prerequisites": ["react-fundamentals-l4"],
    "blocks": [
      {
        "type": "text",
        "title": "Controlled Inputs",
        "markdown": "Controlled components tie the input's value to React state."
      },
      {
        "type": "quiz",
        "question": "When does a `useEffect` hook with an empty dependency array (`[]`) run?",
        "kind": "single",
        "options": [
          "Only on the very first render.",
          "After every render.",
          "Before the component renders.",
          "Only when a specific state variable changes."
        ],
        "correct": [0],
        "explanations": [
          "Correct! Runs once on mount.",
          "Incorrect. This happens when you omit the dependency array entirely.",
          "Incorrect. `useEffect` runs after rendering.",
          "Incorrect. You'd list the variable in the dependency array."
        ],
        "penalty_hearts": 1
      },
      {
        "type": "mentor",
        "mode": "guide",
        "trigger": "manual",
        "prompt_vars": {
          "proficiency": "beginner",
          "lesson_context": "Controlled components and the useEffect dependency array."
        }
      }
    ]
  }
]
